<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout :: head"></head>



<body class="hold-transition sidebar-mini layout-fixed">

	<!-- Site wrapper -->
	<div class="wrapper">
		<!-- Navbar -->
		<nav th:replace="layout/fragments/navbar :: Navbar"></nav>

		<!-- Main Sidebar Container -->
		<aside th:replace="layout/fragments/sidebar :: Main-Sidebar-Container"></aside>
		<!-- / Main Sidebar Container -->

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 th:text="#{text.menu.security.users}">Users</h1>
						</div>
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#"
									th:text="#{text.menu.security}">Security</a></li>
								<li class="breadcrumb-item active"
									th:text="#{text.menu.security.users}">Users</li>
							</ol>
						</div>
					</div>
				</div>
				<!-- /.container-fluid -->
			</section>

			<section class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col">

							<div class="card">
								<div class="card-header">
									<h3 class="card-title" th:text="${titulo}">DataTable Title</h3>
									<div class="card-tools">
										<button type="button" class="btn btn-tool"
											data-card-widget="collapse">
											<i class="fas fa-minus"></i>
										</button>
										<button type="button" class="btn btn-tool"
											data-card-widget="remove">
											<i class="fas fa-times"></i>
										</button>
									</div>
								</div>
								<div class="card-body">
									<form th:action="@{/user/form}" th:object="${user}"
										method="post" enctype="multipart/form-data">
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label th:text="#{text.user.username}">USUARIO</label> <input
														type="text" th:field="*{username}" class="form-control"
														th:placeholder="#{text.user.username}"
														th:errorclass="'form-control alert-danger'" /> <small
														class="form-text text-danger"
														th:if="${#fields.hasErrors('username')}"
														th:errors="*{username}"></small>
												</div>
												<!-- /.form-group -->
												<div class="form-group">
													<label th:text="#{text.user.firstname}">NOMBRE</label> <input
														type="text" th:field="*{firstname}" class="form-control"
														th:placeholder="#{text.user.firstname}"
														th:errorclass="'form-control alert-danger'" /> <small
														class="form-text text-danger"
														th:if="${#fields.hasErrors('firstname')}"
														th:errors="*{firstname}"></small>
												</div>
												<!-- /.form-group -->
												<div class="form-group">
													<label th:text="#{text.user.lastname}">Apellido</label> <input
														type="text" th:field="*{lastname}" class="form-control"
														th:placeholder="#{text.user.lastname}"
														th:errorclass="'form-control alert-danger'" /> <small
														class="form-text text-danger"
														th:if="${#fields.hasErrors('lastname')}"
														th:errors="*{lastname}"></small>
												</div>
												<!-- /.form-group -->

												<div th:if="*{id==null}" class="form-group">
													<label th:text="#{text.user.password}">Password</label> <input
														type="password" th:field="*{password}"
														class="form-control"
														th:placeholder="#{text.user.password}"
														th:errorclass="'form-control alert-danger'" /> <small
														class="form-text text-danger"
														th:if="${#fields.hasErrors('password')}"
														th:errors="*{password}"></small>
												</div>
												<!-- /.form-group -->

												<div class="form-group">
													<label th:text="#{text.user.status}">Enable</label> <select
														class="form-control" th:field="*{enabled}">
														<option th:value="True" th:selected="*{enabled}==1"
															th:text="#{text.user.enable}"></option>
														<option th:value="False" th:selected="*{enabled}==0"
															th:text="#{text.user.disabled}"></option>
													</select>
												</div>
												<!-- /.form-group -->

												<div class="form-group">
													<label th:text="#{text.role.rol}">ROL</label> <select
														th:field="*{roles}" class="select2bs4" multiple="multiple"
														data-placeholder="Selecciona un Rol" style="width: 100%;">
														<option th:each="rol: ${roles}" th:value="${rol.id}"
															th:text="${rol.authority}"></option>
													</select>
												</div>
												<!-- /.form-group -->
												<div class="form-group">
													<button type="submit" class="btn btn-secondary"
														th:text="#{text.generic.save}">Submit</button>
												</div>
												<!-- /.form-group -->
											</div>
											<!-- /.col -->
										</div>
										<!-- /.row -->
									</form>
								</div>
								<div class="card-footer"></div>
							</div>

							<div class="card" th:if="${user.id!=null}">
								<div class="card-header">
									<h3 class="card-title" th:text="#{text.user.changePassword}">DataTable
										Title</h3>
									<div class="card-tools">
										<button type="button" class="btn btn-tool"
											data-card-widget="collapse">
											<i class="fas fa-minus"></i>
										</button>
										<button type="button" class="btn btn-tool"
											data-card-widget="remove">
											<i class="fas fa-times"></i>
										</button>
									</div>
								</div>
								<div class="card-body">
									<form th:action="@{/users/form}" th:object="${user}"
										method="post" enctype="multipart/form-data">
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label th:text="#{text.user.password}">Password</label> <input
														type="password" th:field="*{password}"
														class="form-control"
														th:placeholder="#{text.user.password}"
														th:errorclass="'form-control alert-danger'" /> <small
														class="form-text text-danger"
														th:if="${#fields.hasErrors('password')}"
														th:errors="*{password}"></small>
												</div>
												<!-- /.form-group -->

												<div class="form-group">
													<button type="submit" class="btn btn-secondary"
														th:text="#{text.generic.save}">Submit</button>
												</div>
												<!-- /.form-group -->
											</div>
											<!-- /.col -->
										</div>
										<!-- /.row -->
									</form>
								</div>
								<div class="card-footer"></div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Main content -->

			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<footer th:replace="layout/layout :: footer"></footer>

		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
	</div>
	<!-- ./wrapper -->

	<div th:replace="layout/layout :: required-scripts"></div>

	<script th:replace="layout/fragments/sweetalertAndToastr :: CrudAlerts"
		th:inline="javascript"></script>

	<!-- DataTables -->
	<script type="text/javascript"
		th:src="@{/js/jquery.spring-friendly.js}"></script>
	<script
		th:src="@{/webjars/AdminLTE/plugins/datatables/jquery.dataTables.min.js}"></script>
	<script
		th:src="@{/webjars/AdminLTE/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
	<script
		th:src="@{/webjars/AdminLTE/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
	<script
		th:src="@{/webjars/AdminLTE/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>

	<!-- page script -->


	<script>
		$(function() {
			//Initialize Select2 Elements
			$('.select2').select2({

			})

			//Initialize Select2 Elements
			$('.select2bs4').select2({
				theme : 'bootstrap4'
			})

		})
	</script>

</body>
</html>
